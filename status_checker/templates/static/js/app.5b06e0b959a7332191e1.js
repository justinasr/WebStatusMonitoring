webpackJsonp([1],{0:function(t,e){},JyBg:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),n=s("Xxa5"),o=s.n(n),i=s("exGp"),r=s.n(i),l={name:"MainComponent",data:function(){return{statusServiceUrl:location.protocol+"//"+location.hostname,refreshInterval:6e4,entries:null,items:[],logsDialog:!1,logsDialogTitle:"",timer:null,pythonVersion:"-"}},created:function(){this.fetchStatus(),this.startAutoRefresh(),this.getPythonVersion()},filters:{codeToColor:function(t){return 200===t?"status-green":0==t?"status-red":-1==t?"status-gray":"status-orange"},codeToText:function(t){return 200===t?"Looks good!":0==t?"Appears to be dead...":-1==t?"Hasn't been checked yet.":"Is broken. Returns "+t}},methods:{startAutoRefresh:function(){clearInterval(this.timer),this.timer=setInterval(function(){this.fetchStatus()}.bind(this),this.refreshInterval)},fetchStatus:function(t){var e=this;return r()(o.a.mark(function s(){var a,n;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.$http.get(e.statusServiceUrl+"/get_status");case 2:a=s.sent,(n=JSON.parse(a.bodyText)).forEach(function(e){e.disabled=t===e.target_id,setTimeout(function(){e.disabled=!1},1e3*Math.random())}),e.$set(e,"entries",n);case 6:case"end":return s.stop()}},s,e)}))()},updateAll:function(){var t=this;return r()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.startAutoRefresh(),t.entries.forEach(function(t){t.disabled=!0}),e.next=4,t.$http.get(t.statusServiceUrl+"/update_status");case 4:t.fetchStatus();case 5:case"end":return e.stop()}},e,t)}))()},updateStatus:function(t){var e=this;return r()(o.a.mark(function s(){var a;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=e.entries[t].target_id,e.entries[t].disabled=!0,s.next=4,e.$http.get(e.statusServiceUrl+"/update_status/"+a);case 4:e.fetchStatus(a);case 5:case"end":return s.stop()}},s,e)}))()},fetchLogs:function(t){var e=this;this.$http.get(this.statusServiceUrl+"/get_logs"+(void 0!=t?"/"+t:"")).then(function(s){e.items=JSON.parse(s.bodyText),e.logsDialog=!0,""==t?e.logsDialogTitle="All logs":e.items.length>0?e.logsDialogTitle=e.items[0].name+" logs":e.logsDialogTitle="No logs"},function(t){})},getPythonVersion:function(t){var e=this;this.$http.get(this.statusServiceUrl+"/python_version").then(function(t){e.pythonVersion=t.bodyText},function(t){})}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("h1",[t._v("Are things still working?")]),t._v(" "),s("h3",[t._v("WebStatusMonitoring")]),t._v(" "),s("h4",[t._v("Running on Python "+t._s(t.pythonVersion))]),t._v(" "),s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{row:"",wrap:""}},t._l(t.entries,function(e,a){return s("v-flex",{key:e.target_id,attrs:{lg3:"",md4:"",sm6:"",xs12:""}},[s("v-card",{class:"elevation-10 "+(e.disabled?"disabled":"enabled"),attrs:{"text-xs-center":"",color:t._f("codeToColor")(e.code)}},[s("v-card-text",{staticClass:"title"},[s("b",[t._v(t._s(e.name))])]),t._v(" "),e.disabled?t._e():s("v-card-text",[s("p",[t._v("Status: "+t._s(t._f("codeToText")(e.code)))]),t._v(" "),-1!=e.code?s("p",[t._v("Last check: "+t._s(e.checked))]):t._e()]),t._v(" "),e.disabled?s("v-card-text",[s("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):t._e(),t._v(" "),s("v-card-actions",[s("div",{staticClass:"margin-auto"},[e.display_url?s("v-tooltip",{attrs:{bottom:""}},[s("v-btn",{staticClass:"blue-button elevation-3",attrs:{slot:"activator",dark:"",fab:"",small:"",href:e.url},slot:"activator"},[s("v-icon",[t._v("open_in_new")])],1),t._v(" "),s("span",[t._v("Open "+t._s(e.name))])],1):t._e(),t._v(" "),s("v-tooltip",{attrs:{bottom:""}},[s("v-btn",{staticClass:"blue-button elevation-3",attrs:{slot:"activator",dark:"",fab:"",small:""},on:{click:function(e){t.updateStatus(a)}},slot:"activator"},[s("v-icon",[t._v("refresh")])],1),t._v(" "),s("span",[t._v("Check status of "+t._s(e.name))])],1),t._v(" "),s("v-tooltip",{attrs:{bottom:""}},[s("v-btn",{staticClass:"blue-button elevation-3",attrs:{slot:"activator",dark:"",fab:"",small:""},on:{click:function(s){s.stopPropagation(),t.fetchLogs(e.target_id)}},slot:"activator"},[s("v-icon",[t._v("assignment")])],1),t._v(" "),s("span",[t._v("Show logs of "+t._s(e.name))])],1)],1)])],1)],1)})),t._v(" "),s("v-dialog",{attrs:{scrollable:"","max-width":"400px"},model:{value:t.logsDialog,callback:function(e){t.logsDialog=e},expression:"logsDialog"}},[s("v-card",[s("v-card-title",{staticClass:"title"},[t._v(t._s(this.logsDialogTitle))]),t._v(" "),s("v-divider"),t._v(" "),s("v-card-text",[s("v-list",{attrs:{"three-line":""}},[t._l(this.items,function(e,a){return[s("v-list-tile",{on:{click:function(t){}}},[s("v-list-tile-content",[s("v-list-tile-title",[s("div",{staticClass:"status-code",class:t._f("codeToColor")(e.code)},[t._v(t._s(e.code))]),t._v(" "+t._s(e.name))]),t._v(" "),s("v-list-tile-sub-title",[t._v("Title: "+t._s(e.output_title))]),t._v(" "),s("v-list-tile-sub-title",[t._v(t._s(e.date))])],1)],1),t._v(" "),a+1<t.items.length?s("v-divider",{key:a}):t._e()]})],2)],1),t._v(" "),s("v-divider"),t._v(" "),s("v-card-actions",[s("v-btn",{staticClass:"blue-button margin-auto",attrs:{dark:"",fab:"",small:""},on:{click:function(e){e.stopPropagation(),t.logsDialog=!1}}},[s("v-icon",[t._v("check")])],1)],1)],1)],1),t._v(" "),s("v-tooltip",{attrs:{bottom:""}},[s("v-btn",{staticClass:"blue-button",attrs:{slot:"activator",dark:"",fab:"",small:""},on:{click:function(e){t.updateAll()}},slot:"activator"},[s("v-icon",[t._v("refresh")])],1),t._v(" "),s("span",[t._v("Check status of all services")])],1),t._v(" "),s("v-tooltip",{attrs:{bottom:""}},[s("v-btn",{staticClass:"blue-button",attrs:{slot:"activator",dark:"",fab:"",small:""},on:{click:function(e){t.fetchLogs()}},slot:"activator"},[s("v-icon",[t._v("assignment")])],1),t._v(" "),s("span",[t._v("Show all logs")])],1)],1)],1)},staticRenderFns:[]};var v={name:"App",components:{MainComponent:s("VU/8")(l,c,!1,function(t){s("JyBg")},null,null).exports}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("MainComponent")],1)},staticRenderFns:[]};var d=s("VU/8")(v,u,!1,function(t){s("gt5V")},null,null).exports,_=s("8+8L"),f=s("3EgV"),p=s.n(f);a.a.config.productionTip=!1,a.a.use(_.a),a.a.use(p.a),new a.a({el:"#app",components:{App:d},template:"<App/>"})},gt5V:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.5b06e0b959a7332191e1.js.map